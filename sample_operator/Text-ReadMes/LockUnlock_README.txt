
   StreamBase Documentation
   
Lock and Unlock Operators Sample

   This topic explains how we built the Lock and Unlock operators sample.
   
   This sample uses paired Lock and Unlock operators to protect shared
   data against concurrent writes. The sample is intended only to
   demonstrate how to protect the data, and does not include other
   concurrent operations which might access the data. Other concurrent
   operations could derive from data on different streams sharing the
   query table, or they could be generated by tuples on the same stream,
   which would have to wait for the tuple being protected by the Lock
   clearing the Unlock (presumably there would be additional operators
   between the Lock and Unlock to process the data.)
   
   This example uses the same key for both the key into the Query Table
   and the key on which to lock for exclusive access.
   
   This topic describes how to run the Lock and Unlock sample
   application. For detailed information about this and other samples,
   please see the Samples Guide in the StreamBase Studio Help.
   
Running LockUnlock.sbapp in StreamBase Studio

    1. In the Package Explorer, double-click to open the LockUnlock.sbapp
       application. Make sure the application is the currently active tab
       in the EventFlow Editor.
    2. Click the Run button. This opens the SB Test/Debug perspective and
       starts the application.
    3. In the Application Output view, select the ReturnProtectedData
       output stream. No output is displayed at this point, but the
       dequeuer is prepared to receive output. This view will eventually
       show the output of the application.
    4. In the Manual Input view, select the WriteProtectedData input
       stream.
    5. Enter 1 and xyz in the protectedDataKey and protectedDataValueInit
       fields, respectively.
    6. Click Send Data, and observe this data appears in the Application
       Output view:
sharedDataLockKey=1, protectedDataLockKey=xyz
    7. When done, press F9 or click the Stop Running Application button.
       
Running LockUnlock.sbapp in Terminal Windows

   This section describes how to run the sample in UNIX terminal windows
   or Windows command prompt windows. On Windows, be sure to use the
   StreamBase Command Prompt from the Start menu as described in the
   Test/Debug Guide, not the default command prompt.
    1. Open three terminal windows on UNIX, or three StreamBase Command
       Prompts on Windows. In each window, navigate to the directory
       where the sample is installed, or to your workspace copy of the
       sample, as described above.
    2. In window 1, type:
       sbd LockUnlock.sbapp
       The window shows notice[StreamBaseServer] listening on port 10000.
    3. In window 2, type:
       sbc dequeue
       There is no output immediately, but the dequeuer is primed to
       display subsequent output of the application.
    4. In window 3, type:
       sbc enqueue WriteProtectedData
       The sbc command is now awaiting keyboard input. Type: 1,xyz.
    5. In window 3, type: Ctrl+Z (Windows) or Ctrl+D (UNIX) to exit the
       sbc session.
    6. Observe these lines in the dequeue window:
       ReturnProtectedData,1,xyz.
    7. In window 3, type the following command to terminate the server
       and dequeuer:
       sbadmin shutdown
       
   [1]Back to Top ^
   
Sample Location

   When you load the sample into StreamBase Studio, Studio copies the
   sample's files to a project folder in your Studio workspace directory.
   Because the Studio workspace location is normally part of your home
   directory, you have full access rights there by default.
   
Important

   Load this sample in StreamBase Studio, and thereafter use the Studio
   workspace copy of the sample to run and test it, even when running
   from the command prompt.
   
   Using the workspace copy of the sample avoids the permission problems
   that can occur when trying to work with the initially installed
   location of the sample. The default workspace location for this sample
   is:
studio-workspace/sample_operator

   See Default Installation Directories in the Installation Guide for the
   location of studio-workspace on your system.
   
   In the default TIBCO StreamBase installation, this sample's files are
   initially installed in:
streambase-install-dir/sample/operator

   See Default Installation Directories in the Installation Guide for the
   location of streambase-install-dir on your system. This location may
   require administrator privileges for write access, depending on your
   platform.
   
   Copyright © 2004-2015 TIBCO Software Inc. All rights reserved.


